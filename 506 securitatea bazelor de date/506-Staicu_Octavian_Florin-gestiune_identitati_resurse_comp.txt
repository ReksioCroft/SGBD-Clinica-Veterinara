-- 4. gestionarea utilizatorilor unei baze de date si a resurseloc computationale
CREATE USER C##ADMINISTRATOR IDENTIFIED BY PASSWORD PASSWORD EXPIRE;
GRANT CREATE SESSION TO C##ADMINISTRATOR;

CREATE USER C##DOCTOR IDENTIFIED BY PASSWORD PASSWORD EXPIRE;
GRANT CREATE SESSION TO C##DOCTOR;

CREATE USER C##CONTABIL IDENTIFIED BY PASSWORD PASSWORD EXPIRE;
GRANT CREATE SESSION TO C##CONTABIL;

CREATE USER C##GUEST_DOCTOR  IDENTIFIED BY PASSWORD PASSWORD EXPIRE;
GRANT CREATE SESSION TO C##GUEST_DOCTOR;

CREATE USER C##GUEST_FINANTE  IDENTIFIED BY PASSWORD PASSWORD EXPIRE;
GRANT CREATE SESSION TO C##GUEST_FINANTE;

ALTER USER C##ADMINISTRATOR QUOTA UNLIMITED ON USERS;
ALTER USER C##DOCTOR QUOTA UNLIMITED ON USERS;
ALTER USER C##CONTABIL QUOTA UNLIMITED ON USERS;
ALTER USER C##GUEST_DOCTOR QUOTA 1M ON USERS;
ALTER USER C##GUEST_FINANTE QUOTA 1M ON USERS;

-- GRANT SELECT ON DBA_TS_QUOTAS to c##reksio;
SELECT *
FROM DBA_TS_QUOTAS
where TABLESPACE_NAME='USERS';

CREATE PROFILE C##FULL_PROFILE LIMIT
    SESSIONS_PER_USER 5
    IDLE_TIME 20
    FAILED_LOGIN_ATTEMPTS 4
    CONNECT_TIME 120;

CREATE PROFILE C##GUEST_PROFILE LIMIT
    SESSIONS_PER_USER 20
    IDLE_TIME 5
    FAILED_LOGIN_ATTEMPTS 10
    CONNECT_TIME 10;

ALTER USER C##ADMINISTRATOR PROFILE C##FULL_PROFILE;
ALTER USER C##DOCTOR PROFILE C##FULL_PROFILE;
ALTER USER C##CONTABIL PROFILE C##FULL_PROFILE;
ALTER USER C##GUEST_DOCTOR PROFILE C##GUEST_PROFILE;
ALTER USER C##GUEST_FINANTE PROFILE C##GUEST_PROFILE;

SELECT *
FROM DBA_USERS
WHERE UPPER(USERNAME) LIKE 'C##%';